<%
  def fixture_data(name)
    render_binary("#{RAILS_ROOT}/test/fixtures/#{name}")
  end

  def render_binary(filename)
    data = File.open(filename,'rb').read
    base64ed_data = [data].pack('m').gsub(/\n/,"\n    ")
    "!binary | #{base64ed_data}\n"
  end
%>
picture_data_1:
  id: 1
  picture_id: 1
  data: <%= fixture_data("picture_data_1.jpg") %>
picture_data_2:
  id: 2
  picture_id: 2
  data: <%= fixture_data("picture_data_2.gif") %>
<% 3.upto(15) do |index| %>
picture_data_<%= index %>:
  id: <%= index %>
  picture_id: <%= index %>
  data: <%= fixture_data("picture_data_#{(index%2) + 1}.#{(((index%2) + 1) == 1) ? 'jpg' : 'gif'}") %>
<% end %>
